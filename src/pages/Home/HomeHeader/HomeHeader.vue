<template>
  <div class="home-header">
    <!--首页搜索-->
    <div class="header-search">
      <a href="/" class="logo"></a>
      <div class="search">
        <i class="iconfont"></i>
        <span>搜索商品, 共11765款好物</span>
      </div>
    </div>
    <!--首页导航-->
    <div class="header-nav border-1px">
      <ul class="nav-list">
        <li class="list-item"
            @click="addClass(index)"
            v-for="(item, index) in navList" :key="index">
          <span ref="span" :class='{active: index === 0}'>{{item}}</span>
        </li>
      </ul>
    </div>
  </div>
</template>

<script>
  import BScroll from 'better-scroll'
  export default {
    name: "HomeHeader",
    data () {
      return {
        navList: ['推荐', '居家', '鞋包配饰', '服装', '电器', '洗护', '饮食', '餐厨', '婴童', '文体', '特色区'],
      }
    },
    mounted () {
      this.$nextTick(() => {
        new BScroll('.header-nav', {  // 给导航栏添加滚动
          click: true,
          scrollX: true
        })
      })
    },
    methods: {
      addClass (index) {
        this.$refs.span.forEach(item => {item.className = ''})
        this.$refs.span[index].className += ' active'
      }
    }
  }
</script>

<style lang="stylus" rel="stylesheet/stylus" scoped>
  @import '../../../assets/stylus/mixins.styl'
  .home-header
    position: fixed
    top: 0
    left: 0
    z-index: 5
    width: 100%
    height: 148px
    background-color: #fff
    .header-search
      display: flex
      flex-flow row nowrap
      align-items: center
      padding .21333rem .4rem
      box-sizing content-box
      .logo
        display: inline-block
        width: 1.84rem
        height: .53333rem
        margin-right: .26667rem
        background-image: url(http://yanxuan-static.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/icon-normal/indexLogo-11d65342f9.png)
        background-repeat no-repeat
        background-size cover
        background-position: center
      .search
        display: flex
        flex-grow 1
        flex-flow row nowrap
        align-items: center
        justify-content: center
        height .74667rem
        font-size .37333rem
        background-color: #ededed
        border-radius .10667rem
        i
          display: inline-block
          vertical-align middle
          background-image url(http://yanxuan-static.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/icon-normal/search2-2fb94833aa.png)
          background-repeat no-repeat
          background-size 100% 100%
          margin-right: .13333rem
          width: .37333rem
          height: .37333rem
        span
          color: #666
    .header-nav
      display: flex
      flex-flow row nowrap
      background-color: #ffffff
      position: relative
      height: 60px
      width: 100%
      overflow: hidden
      .nav-list
        height .6rem
        display flex
        flex-shrink: 0
        flex-direction: row
        flex-wrap nowrap
        align-items center
        justify-content: space-around
        padding: 0 .4rem
        .list-item
          margin-left 0.64rem
          position: relative
          flex-shrink: 0
          display: flex
          flex-flow: row nowrap
          align-items: center
          justify-content: center
          z-index: 1
          text-align center
          &:first-of-type
            margin-left 0
          &.router-link-active
            color: #b4282d
          span
            &.active
              position relative
              color #b4282d
              &::after
                content: ''
                position: absolute
                left: 0
                bottom: 0
                width: 100%
                height: 0.05333rem
                background-color: #b4282d
          span
            display: inline-block
            padding: 0 .21333rem
            line-height: .8rem
            font-size .37333rem
            text-align: center
            color: #333
</style>
